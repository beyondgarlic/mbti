<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <!--반응형 페이지 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>의성 특산품 MBTI 테스트</title>
    <link rel="stylesheet" href="style.css">

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-NXBRT3Z5');</script>
    <!-- End Google Tag Manager -->
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXBRT3Z5" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->



    <div class="top-menu">
        <a href="https://beyondgarlic.github.io/garlicintro/" class="menu-link-home">
            <img src="images/home.png" alt="메인 화면 이동">
            <span class="menu-text"></span>
        </a>
        <a href="https://esmall.cyso.co.kr/" class="menu-link">
            <img src="images/shoppingmall.png" alt="쇼핑몰 이동">
            <span class="menu-text"></span>
        </a>
        <!-- <div class="top-menu-visitCount">
            <h4>접속자 수 :</h4>
            <p id="visitorCount">Loading...</p>
        </div> -->
    </div>


    <div id="main-page" class="page">
        <h1>의성 특산품 MBTI</h1>
        <p>나의 MBTI를 통해 의성의 특산품 찾기!</p>
        <button id="start-btn">테스트 시작하기</button>
    </div>

    <div id="test-page" class="page hidden">
        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
        <p id="progress-text"></p>

        <h2 id="question"></h2>
        <div class="options-container">
            <button class="option-btn" id="option-a"></button>
            <button class="option-btn" id="option-b"></button>
        </div>
    </div>

    <div id="result-page" class="page hidden">
        <h2 id="product-name"></h2>
        <img id="product-img" src="" alt="추천 캐릭터 이미지" />
        <p id="mbti-name"></p>
        <p id="mbti-desc"></p>

        <div id="product-desc" class="hashtags"></div>

        <!-- ✅ 쇼핑몰 카드 3개 영역 -->
        <div id="product-list" class="product-list"></div>

        <button id="restart-btn">다시하기</button>

        <p>
        <div id="disqus_thread"></div>
        <script>
            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function () { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://beyondgarlic-1.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
                Disqus.</a></noscript>
        </p>

    </div>

    <!-- <script type="module">
        // Firebase SDK import
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        // Firebase 설정 (본인 프로젝트 값으로 교체)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Firebase 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function countVisitor() {
            const counterRef = doc(db, "analytics", "pageViews");

            const snapshot = await getDoc(counterRef);
            if (!snapshot.exists()) {
                // 문서 없으면 생성
                await setDoc(counterRef, { count: 0 });
            }

            // 방문자 수 +1 증가
            await updateDoc(counterRef, { count: increment(1) });

            // 최신 값 가져오기
            const updatedSnap = await getDoc(counterRef);
            document.getElementById("visitorCount").innerText =
                "누적 접속자 수: " + updatedSnap.data().count;
        }

        // 페이지 로드 시 실행
        countVisitor();
    </script> -->


    <script src="script.js"></script>

</body>

</html>